[{"line":1,"elements":[{"line":3,"name":"","description":"","type":"background","keyword":"Background","steps":[{"name":"def getToken = call read('pensionatGetTokenApigee.feature')","result":{"duration":1540072500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":5},{"name":"\/eclipse-workspace\/pensionatApiTest\/src\/test\/java\/pensionatapigee\/pensionatGetTokenApigee.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"","line":5},{"name":"def requestToken =","result":{"duration":2788800,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":5,"doc_string":{"content_type":"","value":"{\n\t'client_id' : '21gYjSJ7jie6GUCTGpQXYyTN1DUCkQBO',\n\t'client_secret' : 'g4QQkgiNr1xcqao1',\n\t'grant_type' : 'client_credentials'\n}\n22:53:31.250 karate.env system property was:","line":5}},{"name":"url 'https:\/\/api.qa.profuturo.mx\/oauth2\/token'","result":{"duration":5825300,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Given","line":14},{"name":"header Content-Type = 'application\/x-www-form-urlencoded'","result":{"duration":2282100,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":15},{"name":"form fields requestToken","result":{"duration":147500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":16},{"name":"method POST","result":{"duration":1319987200,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> When","line":17,"doc_string":{"content_type":"","value":"22:53:32.170 request:\n1 > POST https:\/\/api.qa.profuturo.mx\/oauth2\/token\n1 > Accept-Encoding: gzip,deflate\n1 > Connection: Keep-Alive\n1 > Content-Length: 103\n1 > Content-Type: application\/x-www-form-urlencoded; charset=UTF-8\n1 > Host: api.qa.profuturo.mx\n1 > User-Agent: Apache-HttpClient\/4.5.12 (Java\/1.8.0_251)\nclient_id=21gYjSJ7jie6GUCTGpQXYyTN1DUCkQBO&client_secret=g4QQkgiNr1xcqao1&grant_type=client_credentials\n\n22:53:32.829 response time in milliseconds: 657.46\n1 < 200\n1 < Connection: keep-alive\n1 < Content-Length: 623\n1 < Content-Type: application\/json\n1 < Date: Wed, 28 Oct 2020 04:53:32 GMT\n{\n  \"refresh_token_expires_in\" : \"0\",\n  \"api_product_list\" : \"[ Pensiones_Tramites_QA, Grupo_Empleados_QA]\",\n  \"api_product_list_json\" : [ \" Pensiones_Tramites_QA\", \"Grupo_Empleados_QA\" ],\n  \"organization_name\" : \"profuturo\",\n  \"developer.email\" : \"jose.luis.rojas.perez@everis.com\",\n  \"token_type\" : \"BearerToken\",\n  \"issued_at\" : \"1603860812287\",\n  \"nombre\" : \"\",\n  \"client_id\" : \"21gYjSJ7jie6GUCTGpQXYyTN1DUCkQBO\",\n  \"access_token\" : \"h47CL6biLAz96kY6U8Nk2PFel8eG\",\n  \"application_name\" : \"85928fe5-309b-4f9a-a4d5-8513965b63a8\",\n  \"scope\" : \"\",\n  \"expires_in\" : \"3599\",\n  \"refresh_count\" : \"0\",\n  \"status\" : \"approved\"\n}","line":17}},{"name":"status 200","result":{"duration":15900,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Then","line":18},{"name":"print 'Response: ',response","result":{"duration":3166000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Then","line":19,"doc_string":{"content_type":"","value":"22:53:32.833 [print] Response:  {\n  \"refresh_token_expires_in\": \"0\",\n  \"api_product_list\": \"[ Pensiones_Tramites_QA, Grupo_Empleados_QA]\",\n  \"api_product_list_json\": [\n    \" Pensiones_Tramites_QA\",\n    \"Grupo_Empleados_QA\"\n  ],\n  \"organization_name\": \"profuturo\",\n  \"developer.email\": \"jose.luis.rojas.perez@everis.com\",\n  \"token_type\": \"BearerToken\",\n  \"issued_at\": \"1603860812287\",\n  \"nombre\": \"\",\n  \"client_id\": \"21gYjSJ7jie6GUCTGpQXYyTN1DUCkQBO\",\n  \"access_token\": \"h47CL6biLAz96kY6U8Nk2PFel8eG\",\n  \"application_name\": \"85928fe5-309b-4f9a-a4d5-8513965b63a8\",\n  \"scope\": \"\",\n  \"expires_in\": \"3599\",\n  \"refresh_count\": \"0\",\n  \"status\": \"approved\"\n}","line":19}},{"name":"def getToken = response.access_token","result":{"duration":8603800,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":20},{"name":"print 'Token: ',getToken","result":{"duration":2501500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Then","line":21,"doc_string":{"content_type":"","value":"22:53:32.845 [print] Token:  h47CL6biLAz96kY6U8Nk2PFel8eG","line":21}}]},{"line":7,"name":"Validar el acceso en la aplicación por medio del API sea correcta.","description":"","id":"validar-el-acceso-en-la-aplicación-por-medio-del-api-sea-correcta.","type":"scenario","keyword":"Scenario","steps":[{"name":"def requestAutenticacion = read('autenticacionUsuario.json')","result":{"duration":5071700,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":9},{"name":"url 'https:\/\/api.qa.profuturo.mx\/1\/empleados\/autenticacionUsuario'","result":{"duration":1826600,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":11},{"name":"header Authorization = 'Bearer ' + getToken","result":{"duration":3052500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":12},{"name":"header Content-Type = 'application\/json'","result":{"duration":1922500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":13},{"name":"request requestAutenticacion","result":{"duration":29900,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":14},{"name":"method POST","result":{"duration":340723300,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":15,"doc_string":{"content_type":"","value":"22:53:32.862 request:\n1 > POST https:\/\/api.qa.profuturo.mx\/1\/empleados\/autenticacionUsuario\n1 > Accept-Encoding: gzip,deflate\n1 > Authorization: Bearer com.intuit.karate.ScriptObjectMap@588f03f8\n1 > Connection: Keep-Alive\n1 > Content-Length: 96\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Host: api.qa.profuturo.mx\n1 > User-Agent: Apache-HttpClient\/4.5.12 (Java\/1.8.0_251)\n{\"rqt\":{\"aplicacion\":\"expedientePensiones\",\"contrasena\":\"Profutur02019**\",\"usuario\":\"MC501422\"}}\n\n22:53:33.199 response time in milliseconds: 335.82\n1 < 401\n1 < Connection: keep-alive\n1 < Content-Length: 309\n1 < Content-Type: application\/json\n1 < Date: Wed, 28 Oct 2020 04:53:32 GMT\n1 < WWW-Authenticate: Bearer realm=\"null\",error=\"invalid_token\",error_description=\"keymanagement.service.invalid_access_token: Invalid Access Token\"\n{\n    \"error\": {\n        \"codigo\": \"401\",\n        \"descripcion\": \"Los permisos para consumir la api no son válidos\",\n        \"detalle\": \"Los permisos para consumir la api no son válidos, revisar autorizaión, credenciales, vigencia, etc. \",\n        \"info\": \"http:\/\/dev-profuturo.devportal.apigee.io\"\n    }\n}","line":15}},{"name":"status 200","result":{"duration":1231300,"error_message":"com.intuit.karate.exception.KarateException: pensionatBusquedaCtePolizaApigee2.feature:16 - status code was: 401, expected: 200, response time: 336, url: https:\/\/api.qa.profuturo.mx\/1\/empleados\/autenticacionUsuario, response: {\"error\":{\"descripcion\":\"Los permisos para consumir la api no son válidos\",\"codigo\":\"401\",\"detalle\":\"Los permisos para consumir la api no son válidos, revisar autorizaión, credenciales, vigencia, etc. \",\"info\":\"http:\/\/dev-profuturo.devportal.apigee.io\"}}","status":"failed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":16,"doc_string":{"content_type":"","value":"22:53:33.201 status code was: 401, expected: 200, response time: 336, url: https:\/\/api.qa.profuturo.mx\/1\/empleados\/autenticacionUsuario, response: {\"error\":{\"descripcion\":\"Los permisos para consumir la api no son válidos\",\"codigo\":\"401\",\"detalle\":\"Los permisos para consumir la api no son válidos, revisar autorizaión, credenciales, vigencia, etc. \",\"info\":\"http:\/\/dev-profuturo.devportal.apigee.io\"}}","line":16}},{"name":"match response == {\"confirmacion\":true,\"numeroEmpleado\":\"501422\"}","result":{"duration":0,"status":"skipped"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":17}]},{"line":3,"name":"","description":"","type":"background","keyword":"Background","steps":[{"name":"def getToken = call read('pensionatGetTokenApigee.feature')","result":{"duration":346839500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":5},{"name":"\/eclipse-workspace\/pensionatApiTest\/src\/test\/java\/pensionatapigee\/pensionatGetTokenApigee.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"","line":5},{"name":"def requestToken =","result":{"duration":96000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":5,"doc_string":{"content_type":"","value":"{\n\t'client_id' : '21gYjSJ7jie6GUCTGpQXYyTN1DUCkQBO',\n\t'client_secret' : 'g4QQkgiNr1xcqao1',\n\t'grant_type' : 'client_credentials'\n}\n22:53:33.213 karate.env system property was:","line":5}},{"name":"url 'https:\/\/api.qa.profuturo.mx\/oauth2\/token'","result":{"duration":2810900,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Given","line":14},{"name":"header Content-Type = 'application\/x-www-form-urlencoded'","result":{"duration":138800,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":15},{"name":"form fields requestToken","result":{"duration":83000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":16},{"name":"method POST","result":{"duration":329341400,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> When","line":17,"doc_string":{"content_type":"","value":"22:53:33.229 request:\n1 > POST https:\/\/api.qa.profuturo.mx\/oauth2\/token\n1 > Accept-Encoding: gzip,deflate\n1 > Connection: Keep-Alive\n1 > Content-Length: 103\n1 > Content-Type: application\/x-www-form-urlencoded; charset=UTF-8\n1 > Host: api.qa.profuturo.mx\n1 > User-Agent: Apache-HttpClient\/4.5.12 (Java\/1.8.0_251)\nclient_id=21gYjSJ7jie6GUCTGpQXYyTN1DUCkQBO&client_secret=g4QQkgiNr1xcqao1&grant_type=client_credentials\n\n22:53:33.557 response time in milliseconds: 326.65\n1 < 200\n1 < Connection: keep-alive\n1 < Content-Length: 623\n1 < Content-Type: application\/json\n1 < Date: Wed, 28 Oct 2020 04:53:32 GMT\n{\n  \"refresh_token_expires_in\" : \"0\",\n  \"api_product_list\" : \"[ Pensiones_Tramites_QA, Grupo_Empleados_QA]\",\n  \"api_product_list_json\" : [ \" Pensiones_Tramites_QA\", \"Grupo_Empleados_QA\" ],\n  \"organization_name\" : \"profuturo\",\n  \"developer.email\" : \"jose.luis.rojas.perez@everis.com\",\n  \"token_type\" : \"BearerToken\",\n  \"issued_at\" : \"1603860813020\",\n  \"nombre\" : \"\",\n  \"client_id\" : \"21gYjSJ7jie6GUCTGpQXYyTN1DUCkQBO\",\n  \"access_token\" : \"T6X7wqer6xlDefiVcY9OMKT69rnG\",\n  \"application_name\" : \"85928fe5-309b-4f9a-a4d5-8513965b63a8\",\n  \"scope\" : \"\",\n  \"expires_in\" : \"3599\",\n  \"refresh_count\" : \"0\",\n  \"status\" : \"approved\"\n}","line":17}},{"name":"status 200","result":{"duration":15300,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Then","line":18},{"name":"print 'Response: ',response","result":{"duration":907900,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Then","line":19,"doc_string":{"content_type":"","value":"22:53:33.558 [print] Response:  {\n  \"refresh_token_expires_in\": \"0\",\n  \"api_product_list\": \"[ Pensiones_Tramites_QA, Grupo_Empleados_QA]\",\n  \"api_product_list_json\": [\n    \" Pensiones_Tramites_QA\",\n    \"Grupo_Empleados_QA\"\n  ],\n  \"organization_name\": \"profuturo\",\n  \"developer.email\": \"jose.luis.rojas.perez@everis.com\",\n  \"token_type\": \"BearerToken\",\n  \"issued_at\": \"1603860813020\",\n  \"nombre\": \"\",\n  \"client_id\": \"21gYjSJ7jie6GUCTGpQXYyTN1DUCkQBO\",\n  \"access_token\": \"T6X7wqer6xlDefiVcY9OMKT69rnG\",\n  \"application_name\": \"85928fe5-309b-4f9a-a4d5-8513965b63a8\",\n  \"scope\": \"\",\n  \"expires_in\": \"3599\",\n  \"refresh_count\": \"0\",\n  \"status\": \"approved\"\n}","line":19}},{"name":"def getToken = response.access_token","result":{"duration":1038300,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":20},{"name":"print 'Token: ',getToken","result":{"duration":669600,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Then","line":21,"doc_string":{"content_type":"","value":"22:53:33.560 [print] Token:  T6X7wqer6xlDefiVcY9OMKT69rnG","line":21}}]},{"line":19,"name":"Validar que la información que se regresa del API sea correcta respecto a la póliza dada.","description":"","id":"validar-que-la-información-que-se-regresa-del-api-sea-correcta-respecto-a-la-póliza-dada.","type":"scenario","keyword":"Scenario","steps":[{"name":"def requestPoliza = read('busquedaCtePoliza.json')","result":{"duration":7292000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":21},{"name":"url 'https:\/\/api.qa.profuturo.mx\/pensiones\/2\/pensionado\/grupoFamiliar'","result":{"duration":1993300,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":23},{"name":"header Authorization = 'Bearer ' + getToken","result":{"duration":475000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":24},{"name":"header Content-Type = 'application\/json'","result":{"duration":133800,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":25},{"name":"request requestPoliza","result":{"duration":8500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":26},{"name":"method POST","result":{"duration":332174000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":27,"doc_string":{"content_type":"","value":"22:53:33.572 request:\n1 > POST https:\/\/api.qa.profuturo.mx\/pensiones\/2\/pensionado\/grupoFamiliar\n1 > Accept-Encoding: gzip,deflate\n1 > Authorization: Bearer com.intuit.karate.ScriptObjectMap@7812b906\n1 > Connection: Keep-Alive\n1 > Content-Length: 24\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Host: api.qa.profuturo.mx\n1 > User-Agent: Apache-HttpClient\/4.5.12 (Java\/1.8.0_251)\n{\"poliza\":\"20180023887\"}\n\n22:53:33.903 response time in milliseconds: 329.22\n1 < 401\n1 < Connection: keep-alive\n1 < Content-Length: 309\n1 < Content-Type: application\/json\n1 < Date: Wed, 28 Oct 2020 04:53:33 GMT\n1 < WWW-Authenticate: Bearer realm=\"null\",error=\"invalid_token\",error_description=\"keymanagement.service.invalid_access_token: Invalid Access Token\"\n{\n    \"error\": {\n        \"codigo\": \"401\",\n        \"descripcion\": \"Los permisos para consumir la api no son válidos\",\n        \"detalle\": \"Los permisos para consumir la api no son válidos, revisar autorizaión, credenciales, vigencia, etc. \",\n        \"info\": \"http:\/\/dev-profuturo.devportal.apigee.io\"\n    }\n}","line":27}},{"name":"status 200","result":{"duration":938000,"error_message":"com.intuit.karate.exception.KarateException: pensionatBusquedaCtePolizaApigee2.feature:28 - status code was: 401, expected: 200, response time: 329, url: https:\/\/api.qa.profuturo.mx\/pensiones\/2\/pensionado\/grupoFamiliar, response: {\"error\":{\"descripcion\":\"Los permisos para consumir la api no son válidos\",\"codigo\":\"401\",\"detalle\":\"Los permisos para consumir la api no son válidos, revisar autorizaión, credenciales, vigencia, etc. \",\"info\":\"http:\/\/dev-profuturo.devportal.apigee.io\"}}","status":"failed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":28,"doc_string":{"content_type":"","value":"22:53:33.904 status code was: 401, expected: 200, response time: 329, url: https:\/\/api.qa.profuturo.mx\/pensiones\/2\/pensionado\/grupoFamiliar, response: {\"error\":{\"descripcion\":\"Los permisos para consumir la api no son válidos\",\"codigo\":\"401\",\"detalle\":\"Los permisos para consumir la api no son válidos, revisar autorizaión, credenciales, vigencia, etc. \",\"info\":\"http:\/\/dev-profuturo.devportal.apigee.io\"}}","line":28}},{"name":"print 'Response: ',response","result":{"duration":0,"status":"skipped"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":29},{"name":"match response == {\"poliza\":\"20180023887\"}","result":{"duration":0,"status":"skipped"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":30}]}],"name":"src\/test\/java\/pensionatapigee\/pensionatBusquedaCtePolizaApigee2.feature","description":"Búsqueda de cliente por póliza","id":"búsqueda-de-cliente-por-póliza","keyword":"Feature","uri":"src\/test\/java\/pensionatapigee\/pensionatBusquedaCtePolizaApigee2.feature"}]