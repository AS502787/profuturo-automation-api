[{"line":1,"elements":[{"line":3,"name":"","description":"","type":"background","keyword":"Background","steps":[{"name":"configure ssl = { keyStore: 'server_private.jks', keyStorePassword: 'changeit', keyStoreType: 'jks', trustStore: 'server-trust.jks', trustStorePassword: 'changeit', trustStoreType: 'jks' }","result":{"duration":374178900,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":4,"doc_string":{"content_type":"","value":"15:27:32.305 << lock released, cached callSingle: classpath:pensionatapigee\/pensionatGetTokenApigee.feature\n15:27:32.541 key store key count for server-trust.jks: 2\n15:27:32.623 key store key count for server_private.jks: 2","line":4}},{"name":"pensionatapigee\/pensionatGetTokenApigee.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"","line":4,"doc_string":{"content_type":"","value":"{\n  \"env\": \"dev\",\n  \"myVarName\": \"someValue\",\n  \"authInfo\": {\n    \"authToken\": \"TiuD3QK49gNUlzHzELJvS3CdOfcB\"\n  }\n}\n","line":4}},{"name":"def requestToken =","result":{"duration":2941900,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":5,"doc_string":{"content_type":"","value":"{\n\t'client_id' : '21gYjSJ7jie6GUCTGpQXYyTN1DUCkQBO',\n\t'client_secret' : 'g4QQkgiNr1xcqao1',\n\t'grant_type' : 'client_credentials'\n}\n15:27:29.373 karate.env system property was:  \n15:27:29.375 >> lock acquired, begin callSingle: classpath:pensionatapigee\/pensionatGetTokenApigee.feature","line":5}},{"name":"url 'https:\/\/api.qa.profuturo.mx\/oauth2\/token'","result":{"duration":6520900,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Given","line":14},{"name":"header Content-Type = 'application\/x-www-form-urlencoded'","result":{"duration":2807900,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":15},{"name":"form fields requestToken","result":{"duration":150500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":16},{"name":"method POST","result":{"duration":2806590200,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> When","line":17,"doc_string":{"content_type":"","value":"15:27:30.302 request:\n1 > POST https:\/\/api.qa.profuturo.mx\/oauth2\/token\n1 > Accept-Encoding: gzip,deflate\n1 > Connection: Keep-Alive\n1 > Content-Length: 103\n1 > Content-Type: application\/x-www-form-urlencoded; charset=UTF-8\n1 > Host: api.qa.profuturo.mx\n1 > User-Agent: Apache-HttpClient\/4.5.12 (Java\/1.8.0_251)\nclient_id=21gYjSJ7jie6GUCTGpQXYyTN1DUCkQBO&client_secret=g4QQkgiNr1xcqao1&grant_type=client_credentials\n\n15:27:32.282 response time in milliseconds: 1978.02\n1 < 200\n1 < Connection: keep-alive\n1 < Content-Length: 623\n1 < Content-Type: application\/json\n1 < Date: Wed, 27 Jan 2021 21:27:32 GMT\n{\n  \"refresh_token_expires_in\" : \"0\",\n  \"api_product_list\" : \"[ Pensiones_Tramites_QA, Grupo_Empleados_QA]\",\n  \"api_product_list_json\" : [ \" Pensiones_Tramites_QA\", \"Grupo_Empleados_QA\" ],\n  \"organization_name\" : \"profuturo\",\n  \"developer.email\" : \"jose.luis.rojas.perez@everis.com\",\n  \"token_type\" : \"BearerToken\",\n  \"issued_at\" : \"1611782852176\",\n  \"nombre\" : \"\",\n  \"client_id\" : \"21gYjSJ7jie6GUCTGpQXYyTN1DUCkQBO\",\n  \"access_token\" : \"TiuD3QK49gNUlzHzELJvS3CdOfcB\",\n  \"application_name\" : \"85928fe5-309b-4f9a-a4d5-8513965b63a8\",\n  \"scope\" : \"\",\n  \"expires_in\" : \"3599\",\n  \"refresh_count\" : \"0\",\n  \"status\" : \"approved\"\n}","line":17}},{"name":"status 200","result":{"duration":14600,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Then","line":18},{"name":"if (responseStatus != 200) karate.fail('Error al obtener status 200')","result":{"duration":6196600,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":19},{"name":"print 'Response: ', response","result":{"duration":2995400,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Then","line":20,"doc_string":{"content_type":"","value":"15:27:32.293 [print] Response:  {\n  \"refresh_token_expires_in\": \"0\",\n  \"api_product_list\": \"[ Pensiones_Tramites_QA, Grupo_Empleados_QA]\",\n  \"api_product_list_json\": [\n    \" Pensiones_Tramites_QA\",\n    \"Grupo_Empleados_QA\"\n  ],\n  \"organization_name\": \"profuturo\",\n  \"developer.email\": \"jose.luis.rojas.perez@everis.com\",\n  \"token_type\": \"BearerToken\",\n  \"issued_at\": \"1611782852176\",\n  \"nombre\": \"\",\n  \"client_id\": \"21gYjSJ7jie6GUCTGpQXYyTN1DUCkQBO\",\n  \"access_token\": \"TiuD3QK49gNUlzHzELJvS3CdOfcB\",\n  \"application_name\": \"85928fe5-309b-4f9a-a4d5-8513965b63a8\",\n  \"scope\": \"\",\n  \"expires_in\": \"3599\",\n  \"refresh_count\": \"0\",\n  \"status\": \"approved\"\n}","line":20}},{"name":"def access_token = response.access_token","result":{"duration":8288600,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":21},{"name":"print 'Token: ', access_token","result":{"duration":2138900,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Then","line":22,"doc_string":{"content_type":"","value":"15:27:32.304 [print] Token:  TiuD3QK49gNUlzHzELJvS3CdOfcB","line":22}}]},{"line":6,"name":"Validar que la información que se regresa del API sea correcta respecto a la póliza dada","description":"& que el grupo familiar corresponda a la información del cliente una vez ingresado su póliza.","id":"validar-que-la-información-que-se-regresa-del-api-sea-correcta-respecto-a-la-póliza-dada","type":"scenario","keyword":"Scenario Outline","steps":[{"name":"url 'https:\/\/clientes-api-service-tsf-profuturo3-qa.apps.paasprofuturo-d.r6b1.p1.openshiftapps.com\/'","result":{"duration":5535100,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":10},{"name":"header Content-Type = 'application\/json'","result":{"duration":2159600,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":11},{"name":"request {\"consecutivo_beneficiario\":0,\"id_beneficiario_poliza\":'#(id_beneficiario_poliza)',\"id_grupo_pago\":'#(id_grupo_pago)',\"id_oferta\":0,\"id_poliza\":'#(id_poliza)'}","result":{"duration":15249200,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":12},{"name":"method POST","result":{"duration":363780900,"error_message":"com.intuit.karate.exception.KarateException: pensionatLoginMs_1.feature:13 - \njavax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target","status":"failed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":13,"doc_string":{"content_type":"","value":"15:27:32.951 request:\n1 > POST https:\/\/clientes-api-service-tsf-profuturo3-qa.apps.paasprofuturo-d.r6b1.p1.openshiftapps.com\/\n1 > Accept-Encoding: gzip,deflate\n1 > Connection: Keep-Alive\n1 > Content-Length: 159\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Host: clientes-api-service-tsf-profuturo3-qa.apps.paasprofuturo-d.r6b1.p1.openshiftapps.com\n1 > User-Agent: Apache-HttpClient\/4.5.12 (Java\/1.8.0_251)\n{\"consecutivo_beneficiario\":0,\"id_beneficiario_poliza\":\"#(id_beneficiario_poliza)\",\"id_grupo_pago\":\"#(id_grupo_pago)\",\"id_oferta\":0,\"id_poliza\":\"#(id_poliza)\"}\n\n15:27:33.311 javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target, http call failed after 360 milliseconds for URL: https:\/\/clientes-api-service-tsf-profuturo3-qa.apps.paasprofuturo-d.r6b1.p1.openshiftapps.com\/\n15:27:33.311 http request failed: \njavax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target","line":13}},{"name":"status 200","result":{"duration":0,"status":"skipped"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":14},{"name":"if (responseStatus != 200) karate.fail('Error al obtener status 200')","result":{"duration":0,"status":"skipped"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":15},{"name":"print 'Response: ',response","result":{"duration":0,"status":"skipped"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":16},{"name":"match response == {\"code\":200,\"message\":\"Consulta exitosa\",\"response\":{\"solicitante\":{\"id_oferta\":1024683,\"id_poliza\":'#(id_poliza)',\"id_grupo_pago\":'#(id_grupo_pago)',\"fecha_nacimiento\":\"\",\"curp\":\"NAEM791207MTSCLR02\",\"rfc\":\"NAEM791207\",\"e_firma\":\"\",\"apellido_paterno\":\"NACIANCENO\",\"apellido_materno\":\"ELIAS\",\"nombre\":\"MARCELA GUADALUPE\",\"id_titular_cobro\":228930,\"ocupacion\":\"\",\"correo\":\"\",\"gpo_pago\":1,\"folio_oferta\":\"31805020893\",\"domicilio\":{\"calle\":\"TAMAULIPAS\",\"id_pais\":141,\"pais_descripcion\":\"MEXICO\",\"asentamiento\":\"UNIDAD NACIONAL\",\"ciudad\":\"CIUDAD MADERO\",\"estado\":\"TAMAULIPAS\",\"municipio\":\"CIUDAD MADERO\",\"num_ext\":\"111\",\"codigo_postal\":\"89410\"},\"telefonos\":[{\"id_telefono\":15917551,\"consecutivo_referencia\":\"\",\"clave_nacional\":\"833\",\"clave_internacional\":\"\",\"indicador_preferente\":0,\"indicador_sms\":0,\"numero\":\"4534761\",\"tipo_telefono\":\"MOVIL\",\"extension\":\"\",\"horario_de\":\"\",\"horario_hasta\":\"\"}],\"referencias\":[{\"id_parentesco\":\"591\",\"desc_parentesco\":\"OTRO\",\"id_referencia_personal\":47010,\"consecutivo_referencia\":\"\",\"apellido_materno\":\"SMITH\",\"apellido_paterno\":\"LUGO\",\"consecutivo_grupo_pago\":1,\"nombre\":\"ALEJANDRA\",\"telefonos\":[]}],\"datos_bancarios\":{\"descripcion\":\"BBVA BANCOMER\",\"tipo_cuenta\":\"DEPOSITO EN CUENTA BANCARIA\",\"clabe\":\"012813004634489676\",\"id_banco\":50}}}}","result":{"duration":0,"status":"skipped"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":17}]}],"name":"src\/test\/java\/pensionatmicroservices\/pensionatLoginMs_1.feature","description":"MVP_API_Trámite servicio a pensionados alta y o cambio de forma de pago","id":"mvp-api-trámite-servicio-a-pensionados-alta-y-o-cambio-de-forma-de-pago","keyword":"Feature","uri":"src\/test\/java\/pensionatmicroservices\/pensionatLoginMs_1.feature"}]